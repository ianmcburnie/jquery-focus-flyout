
(function($,window,document,undefined){$.fn.focusFlyout=function focusFlyout(options){options=$.extend({autoExpand:true,debug:false,triggerSelector:'.flyout__trigger',overlaySelector:'.flyout__overlay',expandedClass:null},options);return this.each(function onEach(){var $widget=$(this);var $trigger=$widget.find(options.triggerSelector).first();var $overlay=$widget.find(options.overlaySelector).first();var hasExpandedClass=function(){return options.expandedClass!==null;};var isExpanded=function(){return hasExpandedClass()?$widget.hasClass(options.expandedClass):$trigger.attr('aria-expanded')==='true';};var setExpanded=function(){return hasExpandedClass()?$widget.addClass(options.expandedClass):$trigger.attr('aria-expanded','true');};var setCollapsed=function(){return hasExpandedClass()?$widget.removeClass(options.expandedClass):$trigger.attr('aria-expanded','false');};var expandFlyout=function(){if(!isExpanded()){setExpanded();$widget.trigger('flyoutExpand');}};var collapseFlyout=function(){if(isExpanded()){setCollapsed();$widget.trigger('flyoutCollapse');}};$widget.nextId('flyout');if($overlay.prop('id')===''){$overlay.prop('id',$widget.prop('id')+'-overlay');}
$trigger.attr('aria-controls',$overlay.prop('id'));setCollapsed();if(options.autoExpand===true){$trigger.on('focus',expandFlyout);}
$widget.focusExit();$widget.on('focusExit',collapseFlyout);$widget.addClass('flyout--js');});};}(jQuery,window,document));